<div class="admin-container">
  <h2>ğŸ“Š Statistici Utilizatori</h2>

  <div *ngIf="loading" class="loading">Se Ã®ncarcÄƒ utilizatorii...</div>

  <div *ngIf="!loading" class="user-list">
    <div
      class="user-card"
      *ngFor="let user of utilizatori"
      (click)="toggleUser(user.id)"
      [class.expanded]="expandedUserId === user.id"
    >
      <div class="user-header">
        <span class="user-name">ğŸ‘¤ {{ user.username }}</span>
        <span class="user-email">{{ user.email }}</span>
        <button
          class="detalii-btn"
          (click)="goToDetails(user.id); $event.stopPropagation()"
        >
          ğŸ” Vezi detalii
        </button>
      </div>

      <div class="user-progress" *ngIf="expandedUserId === user.id">
        <h4>ğŸ“š Progres la lecÈ›ii:</h4>
        <ul>
          <li *ngFor="let entry of progres[user.id]">
            âœ… LecÈ›ie:
            {{ lessonTitles[entry.lessonId] || "LecÈ›ie necunoscutÄƒ" }} â€“ Scor:
            {{ entry.score }}%

            <br />
            <small>â± {{ entry.completedAt | date : "short" }}</small>
          </li>
          <li *ngIf="!progres[user.id]?.length">FÄƒrÄƒ progres Ã®nregistrat.</li>
        </ul>
      </div>
    </div>
  </div>
</div>
