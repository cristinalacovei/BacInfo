<div class="container">
  <h1>Lista LecÈ›iilor</h1>
  <!-- Buton pentru adÄƒugare lecÈ›ie -->
  <button
    mat-raised-button
    color="primary"
    (click)="adaugaLectie()"
    *ngIf="isAdmin"
  >
    AdaugÄƒ LecÈ›ie
  </button>

  <div *ngFor="let an of ani">
    <button (click)="selecteazaAn(an.nivel)" class="btn btn-primary">
      {{ an.nume }}
    </button>

    <div *ngIf="anSelectat === an.nivel" class="lectii-container">
      <mat-card *ngFor="let lectie of lectiiPerAn[an.nume]" class="lectie-card">
        <mat-card-header>
          <mat-card-title>{{ lectie.title }}</mat-card-title>
        </mat-card-header>
        <mat-card-content class="card-content">
          <p>{{ lectie.description }}</p>
          <div
            *ngIf="progressMap.get(lectie.id) as progress"
            class="progress-badge completat"
          >
            <span class="emoji">âœ…</span>
            <span class="score-text">
              Scor: <strong>{{ progress.score }}%</strong>
              <small>({{ progress.completedAt | date : "short" }})</small>
            </span>
          </div>
          <div
            *ngIf="!progressMap.get(lectie.id)"
            class="progress-badge incomplet"
          >
            <span class="emoji">ðŸ•“</span>
            <span class="score-text">Testul nu a fost Ã®ncÄƒ completat</span>
          </div>
        </mat-card-content>
        <mat-card-actions class="card-actions">
          <button
            mat-button
            color="primary"
            [routerLink]="['/lectie', lectie.id]"
          >
            VizualizeazÄƒ LecÈ›ia
          </button>
          <button
            mat-button
            color="warn"
            (click)="stergeLectie(lectie.id, an.nume)"
            *ngIf="isAdmin"
          >
            È˜terge LecÈ›ia
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>
